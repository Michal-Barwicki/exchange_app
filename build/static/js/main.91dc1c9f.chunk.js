(this.webpackJsonpexchange=this.webpackJsonpexchange||[]).push([[0],{25:function(e,t,a){e.exports=a(41)},30:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),c=a.n(s),i=(a(30),a(9)),l=a(11),o=a.n(l),m=a(15),u=a(4),p=a(5),h=a(7),d=a(6),E=a(8),f=a(22),g=a(12),v=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",pass:"",confirm_pass:"",accept:!1,message:"",PLN:0,USD:0,EUR:0,CHF:0,RUB:0,CZK:0,GBP:0,errors:{username:!1,email:!1,pass:!1,confirm_pass:!1,accept:!1}},a.messages={username_incorrect:"Name should not contain spaces and should contain at least 3 characters.",email_incorrect:"Wrong email address.",pass_incorrect:"Password should contain at least 8 characters.",confirm_pass_incorrect:"Passwords are not the same.",accept_incorrect:"Terms are not confirmed."},a.handleChange=function(e){var t=e.target.name,n=e.target.type;if("text"===n||"password"===n||"email"===n){var r=e.target.value;a.setState(Object(i.a)({},t,r))}else if("checkbox"===n){var s=e.target.checked;a.setState(Object(i.a)({},t,s))}else if("number"===n){var c=e.target.value.replace(/\D/,"");a.setState(Object(i.a)({},t,c))}},a.handleSubmit=function(e){e.preventDefault();var t=a.formValidation();if(t.correct){var n={username:a.state.username,email:a.state.email,password:a.state.pass,PLN:a.state.PLN,USD:a.state.USD,EUR:a.state.EUR,CHF:a.state.CHF,RUB:a.state.RUB,CZK:a.state.CZK,GBP:a.state.GBP},r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)};fetch("/api",r).then((function(e){})),a.setState({username:"",email:"",pass:"",confirm_pass:"",accept:!1,PLN:0,USD:0,EUR:0,CHF:0,RUB:0,CZK:0,GBP:0,message:"A form has been sent",errors:{username:!1,email:!1,pass:!1,confirm_pass:!1,accept:!1}})}else a.setState({errors:{username:!t.username,email:!t.email,pass:!t.password,accept:!t.accept}})},a.formValidation=function(){var e=!1,t=!1,n=!1,r=!1,s=!1,c=!1;return a.state.username.length>=3&&-1===a.state.username.indexOf(" ")&&(e=!0),-1!==a.state.email.indexOf("@")&&(t=!0),a.state.pass.length>=8&&(n=!0),a.state.confirm_pass===a.state.pass&&(r=!0),a.state.accept&&(s=!0),e&&t&&n&&r&&s&&(c=!0),{username:e,email:t,password:n,confirm_password:r,accept:s,correct:c}},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;""!==this.state.message&&setTimeout((function(){return e.setState({message:""})}),2e3)}},{key:"render",value:function(){return r.a.createElement("div",{className:"JoinIn"},r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"user"},r.a.createElement("span",null,"Name:"),r.a.createElement("input",{type:"text",id:"user",name:"username",value:this.state.username,onChange:this.handleChange}),this.state.errors.username&&r.a.createElement("div",{className:"message"}," ",this.messages.username_incorrect," "))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"email"},r.a.createElement("span",null,"Email:"),r.a.createElement("input",{type:"email",id:"email",name:"email",value:this.state.email,onChange:this.handleChange}),this.state.errors.email&&r.a.createElement("div",{className:"message"}," ",this.messages.email_incorrect," "))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"password"},r.a.createElement("span",null,"Password: "),r.a.createElement("input",{type:"password",id:"password",name:"pass",value:this.state.pass,onChange:this.handleChange}),this.state.errors.pass&&r.a.createElement("div",{className:"message"}," ",this.messages.pass_incorrect," "))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"confirm_password"},r.a.createElement("span",null,"Confirm:"),r.a.createElement("input",{type:"password",id:"confirm_password",name:"confirm_pass",value:this.state.confirm_pass,onChange:this.handleChange}),this.state.errors.confirm_pass&&r.a.createElement("div",{className:"message"},this.messages.confirm_pass_incorrect))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"accept"},r.a.createElement("input",{type:"checkbox",id:"accept",name:"accept",checked:this.state.accept,onChange:this.handleChange}),r.a.createElement("span",{className:"terms"},"I confirm I have read and agree to the terms and conditions."),this.state.errors.accept&&r.a.createElement("div",{className:"message"},this.messages.accept_incorrect))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"PLN"},r.a.createElement("span",null,"PLN:"),r.a.createElement("input",{type:"number",id:"PLN",name:"PLN",min:"0",step:"1",value:this.state.PLN,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"USD"},r.a.createElement("span",null,"USD:"),r.a.createElement("input",{type:"number",id:"USD",name:"USD",min:"0",step:"1",value:this.state.USD,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"EUR"},r.a.createElement("span",null,"EUR:"),r.a.createElement("input",{type:"number",id:"EUR",name:"EUR",min:"0",step:"1",value:this.state.EUR,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"CHF"},r.a.createElement("span",null,"CHF:"),r.a.createElement("input",{type:"number",id:"CHF",name:"CHF",min:"0",step:"1",value:this.state.CHF,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"RUB"},r.a.createElement("span",null,"RUB:"),r.a.createElement("input",{type:"number",id:"RUB",name:"RUB",min:"0",step:"100",value:this.state.RUB,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"CZK"},r.a.createElement("span",null,"CZK:"),r.a.createElement("input",{type:"number",id:"CZK",name:"CZK",min:"0",step:"100",value:this.state.CZK,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"GBP"},r.a.createElement("span",null,"GBP:"),r.a.createElement("input",{type:"number",id:"GBP",name:"GBP",min:"0",step:"1",value:this.state.GBP,onChange:this.handleChange}))),r.a.createElement("button",null," Sign up ")),this.state.message&&r.a.createElement("p",null," ",this.state.message," "))}}]),t}(n.Component),b=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",pass:""},a.handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(i.a)({},t,n))},a.handleSubmit=function(e){e.preventDefault(),a.setState({email:"",pass:""})},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"LogIn"},r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"email"},r.a.createElement("span",null,"Email:"),r.a.createElement("input",{type:"email",id:"email_log",name:"email",value:this.state.email,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"password"},r.a.createElement("span",null,"Password:"),r.a.createElement("input",{type:"password",id:"password_log",name:"pass",value:this.state.pass,onChange:this.handleChange}))),r.a.createElement("button",{onClick:function(){return e.props.changePermission(e.state.email,e.state.pass)}},"Log in")))}}]),t}(n.Component),y=(a(32),function(e){return r.a.createElement("div",{className:"LogInPage"},r.a.createElement(v,null),r.a.createElement(b,{changePermission:e.changePermission}))}),C=function(e){return r.a.createElement("div",{className:"navigation"},r.a.createElement("h1",null,"Exchange"),r.a.createElement("p",null,"Logged in as ",r.a.createElement("span",null,e.userData.username),r.a.createElement("span",{onClick:e.logOut},r.a.createElement("i",{className:"fas fa-door-open"}))))},O=function(e){var t=e.item,a=t.id,n=t.code,s=t.unit,c=t.sellPrice;return r.a.createElement("div",{className:"currenciesItem row"},r.a.createElement("span",null,n),r.a.createElement("span",null,s),r.a.createElement("span",null,c),r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return e.exchangeAction(a,"Buy")}},"Buy")))},w=function(e){e.items[0].id=0,e.items[1].id=1,e.items[2].id=2,e.items[3].id=3,e.items[4].id=4,e.items[5].id=5;var t=e.items.map((function(t){return r.a.createElement(O,{key:t.code,item:t,exchangeAction:e.exchangeAction})}));return r.a.createElement("div",{className:"currencies"},r.a.createElement("h2",null,"Currencies"),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"Currency"),r.a.createElement("span",null,"Unit"),r.a.createElement("span",null,"Value"),r.a.createElement("span",null,"Actions")),t)},N=function(e){var t=e.item,a=t.id,n=t.code,s=t.unit,c=t.amount,i=t.purchasePrice,l=(c*i/s).toFixed(2);return r.a.createElement("div",{className:"walletItem row"},r.a.createElement("span",null,n),r.a.createElement("span",null,s),r.a.createElement("span",null,i),r.a.createElement("span",null,c),r.a.createElement("span",null,l),r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return e.exchangeAction(a,"Sell")}},"Sell")))},D=function(e){e.items[0].amount=e.userData.USD,e.items[1].amount=e.userData.EUR,e.items[2].amount=e.userData.CHF,e.items[3].amount=e.userData.RUB,e.items[4].amount=e.userData.CZK,e.items[5].amount=e.userData.GBP,e.items[0].id=0,e.items[1].id=1,e.items[2].id=2,e.items[3].id=3,e.items[4].id=4,e.items[5].id=5;var t=e.items.map((function(t,a){return r.a.createElement(N,{key:a,item:t,exchangeAction:e.exchangeAction})}));return r.a.createElement("div",{className:"wallet"},r.a.createElement("h2",null,"Wallet"),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"Currency"),r.a.createElement("span",null,"Unit"),r.a.createElement("span",null,"Unit price"),r.a.createElement("span",null,"Amount"),r.a.createElement("span",null,"Value"),r.a.createElement("span",null,"Actions")),t,r.a.createElement("div",null,r.a.createElement("p",null,"Available PLN: ",r.a.createElement("p",null,e.userData.PLN))))},P=(a(33),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"MainPage"},r.a.createElement(C,{userData:this.props.userData,currenciesData:this.props.currenciesData,logOut:this.props.logOut}),r.a.createElement("main",null,0==Object.keys(this.props.currenciesData).length?"":r.a.createElement(w,{items:this.props.currenciesData.items,exchangeAction:this.props.exchangeAction}),0==Object.keys(this.props.currenciesData).length?"":r.a.createElement(D,{items:this.props.currenciesData.items,userData:this.props.userData,exchangeAction:this.props.exchangeAction})))}}]),t}(n.Component)),j=(a(34),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={amount:"",value:0,code:""},a.handleChange=function(e){var t=a.props.currenciesData.items[a.props.userAction.index],n=t.unit,r=t.sellPrice,s=t.purchasePrice,c=t.code,i=e.target.value;i=Math.abs(Math.floor(i));var l="";"Buy"==a.props.userAction.action?l=(i*r/n).toFixed(2):"Sell"==a.props.userAction.action&&(l=(i*s/n).toFixed(2)),a.setState({amount:i,value:l,code:c})},a.handleSubmit=function(e){e.preventDefault(),a.props.exchange(a.state.value,a.state.code,a.state.amount),a.props.closePopup()},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.currenciesData.items[this.props.userAction.index],t=e.unit,a=e.sellPrice,n=e.purchasePrice,s=e.code;return"Buy"==this.props.userAction.action?(this.state.amount*a/t).toFixed(2):(this.state.amount*n/t).toFixed(2),r.a.createElement("div",{className:"overlay"},r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("div",{className:"popup"},r.a.createElement("label",{htmlFor:"currency"},r.a.createElement("p",null,this.props.userAction.action,": "),r.a.createElement("input",{type:"number",name:"currency",value:this.state.amount,onChange:this.handleChange})),r.a.createElement("p",null,s," "),"for ",r.a.createElement("span",null,this.state.value," PLN"),r.a.createElement("button",{className:"confirm"},"Confirm"),r.a.createElement("button",{className:"close",onClick:this.props.closePopup},"x"))))}}]),t}(n.Component));a(35);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={permission:!1,currenciesData:{},popupVisible:!1,userAction:{index:"",action:""},userData:{}},a.changePermission=function(){var e=Object(m.a)(o.a.mark((function e(t,n){var r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})},e.next=3,fetch("/users",r);case 3:return s=e.sent,e.next=6,s.json();case 6:(c=e.sent)&&Object.keys(c).length>0&&a.setState({permission:!0,userData:c});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.exchangeAction=function(e,t){a.setState({popupVisible:!0,userAction:{index:e,action:t}})},a.closePopup=function(){a.setState({popupVisible:!1})},a.exchange=function(e,t,n){"Buy"==a.state.userAction.action&&e<=a.state.userData.PLN?a.setState((function(a){return{userData:S({},a.userData,Object(i.a)({PLN:Number(a.userData.PLN)-Number(e)},t,Number(a.userData[t])+Number(n)))}})):"Sell"==a.state.userAction.action&&n<=a.state.userData[t]?a.setState((function(a){return{userData:S({},a.userData,Object(i.a)({PLN:Number(a.userData.PLN)+Number(e)},t,Number(a.userData[t])-Number(n)))}})):alert("You don't have enough funds")},a.logOut=Object(m.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(S({},a.state.userData))},e.next=3,fetch("/userData",t);case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent,a.setState({permission:!1});case 8:case"end":return e.stop()}}),e)}))),a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"getCurrencies",value:function(){var e=Object(m.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setInterval(Object(m.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/currencies");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t.setState({currenciesData:n});case 7:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getCurrencies(),console.log(this.state.currenciesData)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",exact:!0,render:function(t){return r.a.createElement(y,Object.assign({},t,{changePermission:e.changePermission}))}}),r.a.createElement(g.b,{path:"/mainPage",render:function(t){return r.a.createElement(P,Object.assign({},t,{userData:e.state.userData,currenciesData:e.state.currenciesData,exchangeAction:e.exchangeAction,logOut:e.logOut}))}})),r.a.createElement(g.b,{render:function(){return e.state.permission?r.a.createElement(g.a,{to:"/mainPage"}):r.a.createElement(g.a,{to:"/"})}})),this.state.popupVisible?r.a.createElement(j,{userData:this.state.userData,currenciesData:this.state.currenciesData,userAction:this.state.userAction,closePopup:this.closePopup,exchange:this.exchange}):"")}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.91dc1c9f.chunk.js.map